#!/usr/bin/env zunit

@test 'Command set email (::org_admin)' {
  run rbw set email "org_admin@rainbowcli-tests.com"
  assert $state equals 0
}

@test 'Command set password (::Password_123)' {
  run rbw set password "Password_123"
  assert $state equals 0
}

@test 'Command set host (::sandbox.openrainbow.com)' {
  run rbw set host "sandbox.openrainbow.com"
  assert $state equals 0
}

@test 'Command login' {
  run rbw login
  assert $state equals 0
}

@test 'Command whoami (#check user id is correct)' {
  run rbw whoami --json
  assert $state equals 0
  ID=`echo $output | jq '.id' -r`
  assert $ID is_not_empty
  assert $ID same_as '5c63da6fc28fed18f5d2e68e'
}

